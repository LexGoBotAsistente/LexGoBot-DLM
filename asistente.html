<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Asistente Voz con Transcripci칩n</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: auto; }
        button { margin: 5px; padding: 10px 20px; font-size: 16px; }
        textarea, input { width: 100%; padding: 10px; margin-top: 10px; font-size: 16px; }
    </style>
</head>
<body>
<div class="container">
    <h2>Asistente de Voz y Texto</h2>
    <button id="startVoice">游꿗 Activar Asistente de Voz</button>
    <button id="stopVoice">游띔 Detener Voz</button>

    <textarea id="output" rows="4" placeholder="Aqu칤 ver치s la transcripci칩n..." readonly></textarea>

    <h3>Escribe tu pregunta</h3>
    <input type="text" id="inputBox" placeholder="Escribe aqu칤...">
    <button id="sendBtn">Enviar y responder por voz</button>
</div>

<script>
    // Inicializar Speech Recognition
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = 'es-ES';

    // Inicializar s칤ntesis de voz
    function speak(text) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'es-ES';
        speechSynthesis.speak(utterance);
    }

    // Evento: Activar micr칩fono
    document.getElementById('startVoice').addEventListener('click', () => {
        recognition.start();
        speak("Asistente de voz activado. Estoy escuchando.");
    });

    // Evento: Detener micr칩fono
    document.getElementById('stopVoice').addEventListener('click', () => {
        recognition.stop();
        speak("Asistente de voz detenido.");
    });

    // Mostrar texto reconocido
    recognition.onresult = function(event) {
        const text = event.results[0][0].transcript;
        document.getElementById('output').value = text;
        speak("Has dicho: " + text);
        // Aqu칤 podr칤as enviar el texto a tu backend y responder con GPT
    };

    // Escribir y responder por voz
    document.getElementById('sendBtn').addEventListener('click', () => {
        const inputText = document.getElementById('inputBox').value;
        if (inputText.trim() !== "") {
            document.getElementById('output').value = inputText;
            speak("Tu pregunta es: " + inputText + ". Esta es una respuesta de ejemplo.");
            // Aqu칤 puedes conectar con backend y obtener respuesta real
        } else {
            speak("Por favor escribe una pregunta v치lida.");
        }
    });

    // Opcional: Mostrar errores
    recognition.onerror = function(event) {
        console.error("Error en reconocimiento de voz: ", event.error);
        speak("Ocurri칩 un error: " + event.error);
    };
</script>
</body>
</html>
